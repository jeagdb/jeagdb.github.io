<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Protocole SSH</title><meta name="description" content="Picou website"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/logo512.png"/><meta name="next-head-count" content="5"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-d38be8d96a62f950.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-a139143a5227dd23.js" defer=""></script><script src="/_next/static/chunks/pages/_app-18345a372db62c77.js" defer=""></script><script src="/_next/static/chunks/996-c5e5aa4c30f33066.js" defer=""></script><script src="/_next/static/chunks/332-0cc86a20e008f9aa.js" defer=""></script><script src="/_next/static/chunks/pages/content/%5Bid%5D-1df61135c26126cd.js" defer=""></script><script src="/_next/static/BE1OICxrDoERAPrfPYeQc/_buildManifest.js" defer=""></script><script src="/_next/static/BE1OICxrDoERAPrfPYeQc/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-b1385f13-0 sc-589c118f-0 ieJVfi jciYvo"><div class="sc-589c118f-1 lkkWbV"><div class="sc-3cc220b2-0 khlqnp"><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">backend<!-- --> <!-- -->+</div></div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">frontend<!-- --> <!-- -->+</div></div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">hardware<!-- --> <!-- -->+</div></div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">ops<!-- --> <!-- -->-</div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">conteneurisation<!-- --> <!-- -->+</div></div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">processus<!-- --> <!-- -->+</div></div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">protocoles<!-- --> <!-- -->-</div><div class="sc-3cc220b2-4 dUBOAF"><div class="sc-3cc220b2-3 jqa-dhw"></div><a href="/content/ops-protocoles-http">http.md</a></div><div selected="" class="sc-3cc220b2-4 dUBOA-D"><div selected="" class="sc-3cc220b2-3 dFhDF"></div><a href="/content/ops-protocoles-ssh">ssh.md</a></div></div></div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">projets<!-- --> <!-- -->+</div></div><div class="sc-3cc220b2-1 dzJKZu"><div class="sc-3cc220b2-2 cXfmEn">reseaux<!-- --> <!-- -->+</div></div></div><div class="sc-418a9469-0 jGQODd sc-589c118f-2 fdCPzv"><div class="sc-418a9469-1 iboOOi"></div><div class="sc-418a9469-2 gAqlWd"><div><h1>SSH (Secure Shell)</h1>
<p>Protocole d’administration à distance qui permet aux utilisateurs de contrôler et de modifier leurs serveurs distants via Internet. Le service a été créé pour remplacer de façon sécurisée le Telnet, non chiffré.</p>
<p>SSH utilise des <strong>techniques cryptographiques</strong> pour garantir que toutes les <strong>communications</strong> vers et depuis le serveur distant soient <strong>chiffrées</strong>. Il fournit un mécanisme pour authentifier un utilisateur distant, transférer les entrées du client vers l’hôte et relayer la sortie vers le client.</p>
<p>La <strong>commande SSH</strong> se compose de 3 parties distinctes : <strong>SSH {utilisateur} @ {hôte}</strong>.</p>
<ul>
<li>La <strong>commande de clé SSH</strong> indique à votre système que vous souhaitez ouvrir une connexion Secure Shell cryptée.</li>
<li><strong>{utilisateur}</strong> représente le compte auquel vous souhaitez accéder. L’utilisateur root par exemple est l’équivalent de l’administrateur système avec des droits absolus sur toute modification au niveau du système.</li>
<li><strong>{hôte}</strong> fait référence à l’ordinateur auquel vous souhaitez accéder. Cela peut être une adresse IP (par exemple 244.235.23.19) ou un nom de domaine (par exemple www.xyzdomain.com).</li>
</ul>
<h2>Connexion</h2>
<h3>Syntaxe de base</h3>
<p>Pour se connecter à un système distant utilisant SSH, on peut utiliser la commande ssh.<br>
La forme la plus élémentaire de la commande est:</p>
<pre><code>ssh remote_host (remote_host = adresse IP ou le nom de domaine auquel vous essayez de vous connecter)
</code></pre>
<p>Cette commande suppose que le nom d’utilisateur sur le système distant est le même que le nom d’utilisateur sur son système local.
Si le nom d'utilisateur est différent sur le système distant, on peut le spécifier comme ceci:</p>
<pre><code>ssh remote_username@remote_host
</code></pre>
<p>Une fois qu'on est connecté au serveur, il peut être demandé de vérifier son identité en fournissant un mot de passe.
On peut également générer des clés à utiliser à la place des mots de passe.</p>
<p>Pour quitter une session ssh:</p>
<pre><code>exit
</code></pre>
<h3>Authentification par clé</h3>
<p>Fonctionne en créant une paire de clés : une clé privée et une clé publique.</p>
<p>La clé privée se trouve sur la machine du client et est sécurisée et gardée secrète.
La clé publique peut être donnée à n’importe qui ou placée sur n’importe quel serveur auquel vous souhaitez accéder.</p>
<p>Lorsque vous tentez de vous connecter à l’aide d’une paire de clés, le serveur utilise la clé publique pour créer un message pour l’ordinateur client qui ne peut être lu qu’avec la clé privée.
L’ordinateur client renvoie alors la réponse appropriée au serveur et celui-ci saura que le client est légitime.</p>
<p>Pour générer une paire de clés SSH:</p>
<pre><code>ssh-keygen -t rsa
</code></pre>
<p>Elles sont localisées ici <code>~/.ssh/id_rsa.pub et ~/.ssh/id_rsa</code></p>
<p>Pour transférer la clé publique vers le serveur: (dans le cas où on a un mot de passe côté serveur)</p>
<pre><code>ssh-copy-id remote_host
</code></pre>
<p>Si vous avez créé des clés SSH, vous pouvez renforcer la sécurité de votre serveur en désactivant l’authentification uniquement par mot de passe. En dehors de la console, la seule façon de se connecter à votre serveur est d’utiliser la clé privée qui se couple avec la clé publique que vous avez installée sur le serveur.
Avertissement : Avant de procéder à cette étape, assurez-vous que vous avez installé une clé publique pour votre serveur. Sinon, vous serez bloqué à l’extérieur !</p>
<h2>Fonctionnement</h2>
<p>SSH fonctionne en connectant un programme client à un serveur ssh, appelé sshd.</p>
<p>Sur votre serveur, le sshd devrait déjà fonctionner. Si ce n’est pas le cas, vous devrez peut-être accéder à votre serveur via une console Web ou une console série locale.
Sur Ubuntu, vous pouvez démarrer le serveur ssh en tapant:</p>
<pre><code>sudo systemctl start ssh
</code></pre>
<h2>Configuration</h2>
<p>Lorsque vous modifiez la configuration de SSH, vous modifiez les paramètres du serveur sshd.</p>
<p>Dans Ubuntu, le fichier de configuration principal de sshd se trouve à /etc/ssh/sshd_config.
A l'intérieur on retrouve des déclarations de:</p>
<ul>
<li>port (22 par défaut)</li>
<li>clés d'hôtes (HostKey</li>
<li>niveau de connexion (SyslogFacility, LogLevel)</li>
<li>LoginGraceTime (maintien en secondes de la connexion active sans se connecter avec succès)</li>
<li>PermitRootLogin (autoriser ou non le user root à se connecter)</li>
<li>strictModes (sécurité qui refusera les tentatives de connexion si les fichiers d'auth sont lisibles par tous)</li>
</ul>
<p>Pour appliquer les modifications de la config:</p>
<pre><code>sudo systemctl reload ssh
</code></pre>
</div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":{"id":"ops-protocoles-ssh","path":"ops/protocoles/ssh.md","content":"\u003ch1\u003eSSH (Secure Shell)\u003c/h1\u003e\n\u003cp\u003eProtocole d’administration à distance qui permet aux utilisateurs de contrôler et de modifier leurs serveurs distants via Internet. Le service a été créé pour remplacer de façon sécurisée le Telnet, non chiffré.\u003c/p\u003e\n\u003cp\u003eSSH utilise des \u003cstrong\u003etechniques cryptographiques\u003c/strong\u003e pour garantir que toutes les \u003cstrong\u003ecommunications\u003c/strong\u003e vers et depuis le serveur distant soient \u003cstrong\u003echiffrées\u003c/strong\u003e. Il fournit un mécanisme pour authentifier un utilisateur distant, transférer les entrées du client vers l’hôte et relayer la sortie vers le client.\u003c/p\u003e\n\u003cp\u003eLa \u003cstrong\u003ecommande SSH\u003c/strong\u003e se compose de 3 parties distinctes : \u003cstrong\u003eSSH {utilisateur} @ {hôte}\u003c/strong\u003e.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLa \u003cstrong\u003ecommande de clé SSH\u003c/strong\u003e indique à votre système que vous souhaitez ouvrir une connexion Secure Shell cryptée.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e{utilisateur}\u003c/strong\u003e représente le compte auquel vous souhaitez accéder. L’utilisateur root par exemple est l’équivalent de l’administrateur système avec des droits absolus sur toute modification au niveau du système.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e{hôte}\u003c/strong\u003e fait référence à l’ordinateur auquel vous souhaitez accéder. Cela peut être une adresse IP (par exemple 244.235.23.19) ou un nom de domaine (par exemple www.xyzdomain.com).\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eConnexion\u003c/h2\u003e\n\u003ch3\u003eSyntaxe de base\u003c/h3\u003e\n\u003cp\u003ePour se connecter à un système distant utilisant SSH, on peut utiliser la commande ssh.\u003cbr\u003e\nLa forme la plus élémentaire de la commande est:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003essh remote_host (remote_host = adresse IP ou le nom de domaine auquel vous essayez de vous connecter)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCette commande suppose que le nom d’utilisateur sur le système distant est le même que le nom d’utilisateur sur son système local.\nSi le nom d'utilisateur est différent sur le système distant, on peut le spécifier comme ceci:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003essh remote_username@remote_host\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUne fois qu'on est connecté au serveur, il peut être demandé de vérifier son identité en fournissant un mot de passe.\nOn peut également générer des clés à utiliser à la place des mots de passe.\u003c/p\u003e\n\u003cp\u003ePour quitter une session ssh:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eexit\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eAuthentification par clé\u003c/h3\u003e\n\u003cp\u003eFonctionne en créant une paire de clés : une clé privée et une clé publique.\u003c/p\u003e\n\u003cp\u003eLa clé privée se trouve sur la machine du client et est sécurisée et gardée secrète.\nLa clé publique peut être donnée à n’importe qui ou placée sur n’importe quel serveur auquel vous souhaitez accéder.\u003c/p\u003e\n\u003cp\u003eLorsque vous tentez de vous connecter à l’aide d’une paire de clés, le serveur utilise la clé publique pour créer un message pour l’ordinateur client qui ne peut être lu qu’avec la clé privée.\nL’ordinateur client renvoie alors la réponse appropriée au serveur et celui-ci saura que le client est légitime.\u003c/p\u003e\n\u003cp\u003ePour générer une paire de clés SSH:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003essh-keygen -t rsa\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eElles sont localisées ici \u003ccode\u003e~/.ssh/id_rsa.pub et ~/.ssh/id_rsa\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003ePour transférer la clé publique vers le serveur: (dans le cas où on a un mot de passe côté serveur)\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003essh-copy-id remote_host\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSi vous avez créé des clés SSH, vous pouvez renforcer la sécurité de votre serveur en désactivant l’authentification uniquement par mot de passe. En dehors de la console, la seule façon de se connecter à votre serveur est d’utiliser la clé privée qui se couple avec la clé publique que vous avez installée sur le serveur.\nAvertissement : Avant de procéder à cette étape, assurez-vous que vous avez installé une clé publique pour votre serveur. Sinon, vous serez bloqué à l’extérieur !\u003c/p\u003e\n\u003ch2\u003eFonctionnement\u003c/h2\u003e\n\u003cp\u003eSSH fonctionne en connectant un programme client à un serveur ssh, appelé sshd.\u003c/p\u003e\n\u003cp\u003eSur votre serveur, le sshd devrait déjà fonctionner. Si ce n’est pas le cas, vous devrez peut-être accéder à votre serveur via une console Web ou une console série locale.\nSur Ubuntu, vous pouvez démarrer le serveur ssh en tapant:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esudo systemctl start ssh\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eConfiguration\u003c/h2\u003e\n\u003cp\u003eLorsque vous modifiez la configuration de SSH, vous modifiez les paramètres du serveur sshd.\u003c/p\u003e\n\u003cp\u003eDans Ubuntu, le fichier de configuration principal de sshd se trouve à /etc/ssh/sshd_config.\nA l'intérieur on retrouve des déclarations de:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eport (22 par défaut)\u003c/li\u003e\n\u003cli\u003eclés d'hôtes (HostKey\u003c/li\u003e\n\u003cli\u003eniveau de connexion (SyslogFacility, LogLevel)\u003c/li\u003e\n\u003cli\u003eLoginGraceTime (maintien en secondes de la connexion active sans se connecter avec succès)\u003c/li\u003e\n\u003cli\u003ePermitRootLogin (autoriser ou non le user root à se connecter)\u003c/li\u003e\n\u003cli\u003estrictModes (sécurité qui refusera les tentatives de connexion si les fichiers d'auth sont lisibles par tous)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePour appliquer les modifications de la config:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esudo systemctl reload ssh\n\u003c/code\u003e\u003c/pre\u003e\n","title":"Protocole SSH"}},"__N_SSG":true},"page":"/content/[id]","query":{"id":"ops-protocoles-ssh"},"buildId":"BE1OICxrDoERAPrfPYeQc","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>