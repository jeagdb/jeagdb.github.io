(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{1:(e,n,o)=>{"use strict";o.r(n),o.d(n,{default:()=>l});var u=o(4232),r=o(7657),t=o(1480),c=o.n(t),i=o(7876);let s=function(e){var n=e.pseudo,o=e.socket,r=(0,u.useState)(""),t=r[0],s=r[1],l=(0,u.useState)(""),a=(l[0],l[1]),f=(0,u.useState)(null),d=f[0],h=f[1],v=(0,u.useCallback)(function(){d?(console.log("push ??"),d.push("create_room").receive("ok",function(e){console.log("ok ? ",e),c().push("/".concat(e.room_id))}).receive("error",function(e){console.log("error ? ",e),a(e)})):console.log("not push ??")},[d]),p=(0,u.useCallback)(function(){t&&d&&d.push("join_room",{room_id:t}).receive("ok",function(e){c().push("/room/".concat(e.room_id))}).receive("error",function(e){a(e)})},[t,d]);return(0,u.useEffect)(function(){var e=o.channel("rooms:lobby");return h(e),e.join().receive("ok",function(e){console.log("Joined successfully",e)}).receive("error",function(e){console.log("Unable to join",e)}),function(){e.leave()}},[o]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:n}),(0,i.jsx)("button",{onClick:v,children:"cr\xe9er une partie"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{value:t,onChange:function(e){return s(e.target.value)},placeholder:"indiquer l'id de la partie"}),(0,i.jsx)("button",{onClick:p,children:"rejoindre une partie"})]})]})},l=function(){var e=(0,u.useContext)(r.A),n=(0,u.useState)(""),o=(n[0],n[1]),t=(0,u.useState)(""),c=t[0],l=t[1],a=(0,u.useState)(null),f=a[0],d=a[1],h=(0,u.useState)(null),v=h[0],p=h[1];(0,u.useEffect)(function(){if(console.log("snakes"),e){var n=e.channel("user:auth");return d(n),n.join().receive("ok",function(e){console.log("Joined successfully",e)}).receive("error",function(e){console.log("Unable to join",e)}),function(){n.leave()}}},[e]);var k=(0,u.useCallback)(function(){f&&c&&f.push("check_pseudo",{pseudo:c}).receive("ok",function(e){o(e),p(c)}).receive("error",function(e){o(e)})},[f,c]);return v?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s,{pseudo:v,socket:e})}):(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{value:c,onChange:function(e){return l(e.target.value)}}),(0,i.jsx)("button",{onClick:k,children:"Submit Pseudo"})]})}},1480:(e,n,o)=>{e.exports=o(8194)},8105:(e,n,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/snakes",function(){return o(1)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=8105)),_N_E=e.O()}]);