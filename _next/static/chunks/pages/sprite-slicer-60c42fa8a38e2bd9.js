(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{867:(e,i,t)=>{"use strict";t.d(i,{A:()=>n}),t(2851);let n=(0,t(6860).Ue)({s:"577px",m:"769px",l:"993px",xl:"1401px"})},1998:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>et});var n,r,s,o,c,l=t(2228),a=t(1626),d=t(4232),p=t(2851),u=t(867),h=t(7821),g=t(236),f=t(1041),x=t(1772),m=t(7876),y=a.Ay.div.withConfig({displayName:"SpriteSlice__Container",componentId:"sc-ec4o3g-0"})(["width:100%;height:90%;"]),w=a.Ay.div.withConfig({displayName:"SpriteSlice__FileWrapper",componentId:"sc-ec4o3g-1"})(["border:1px solid white;padding:8px;border-radius:5px;cursor:pointer;width:fit-content;height:fit-content;color:",";background-color:",";"],function(e){return e.selected?"grey":"white"},function(e){return e.selected?"white":"transparent"}),_=a.Ay.div.withConfig({displayName:"SpriteSlice__FileButton",componentId:"sc-ec4o3g-2"})(["display:flex;align-items:center;gap:8px;"]),C=a.Ay.input.withConfig({displayName:"SpriteSlice__InputFile",componentId:"sc-ec4o3g-3"})([""]),S=a.Ay.canvas.withConfig({displayName:"SpriteSlice__Canvas",componentId:"sc-ec4o3g-4"})(["object-fit:contain;"]),b=a.Ay.div.withConfig({displayName:"SpriteSlice__Settings",componentId:"sc-ec4o3g-5"})(["display:flex;gap:16px;margin:16px 0;",""],u.A.lessThan("m")(n||(n=(0,l.A)(["\n    flex-direction: column;\n  "])))),v=a.Ay.div.withConfig({displayName:"SpriteSlice__SpriteSettings",componentId:"sc-ec4o3g-6"})(["display:flex;gap:8px;",""],u.A.lessThan("m")(r||(r=(0,l.A)(["\n    flex-direction: column;\n  "])))),j=a.Ay.div.withConfig({displayName:"SpriteSlice__Inline",componentId:"sc-ec4o3g-7"})(["display:flex;gap:8px;align-items:center;"]),A=a.Ay.div.withConfig({displayName:"SpriteSlice__Count",componentId:"sc-ec4o3g-8"})(["min-width:50px;"]),I=a.Ay.input.withConfig({displayName:"SpriteSlice__Slider",componentId:"sc-ec4o3g-9"})(["min-width:200px;width:200px;"]),k=a.Ay.div.withConfig({displayName:"SpriteSlice__Button",componentId:"sc-ec4o3g-10"})(["padding:2px;width:","px;height:","px;border:1px solid white;border-radius:20px;cursor:pointer;"],function(e){return e.width},function(e){return e.height}),N=a.Ay.div.withConfig({displayName:"SpriteSlice__Block",componentId:"sc-ec4o3g-11"})(["display:flex;flex-direction:column;gap:8px;"]),E=a.Ay.div.withConfig({displayName:"SpriteSlice__CanvasWrapper",componentId:"sc-ec4o3g-12"})(["max-width:70%;height:80%;overflow:auto;",""],u.A.lessThan("m")(s||(s=(0,l.A)(["\n    max-width: 100%;\n    height: 70%;\n  "])))),z=(0,a.Ay)(x.g).withConfig({displayName:"SpriteSlice__SpritesheetButton",componentId:"sc-ec4o3g-13"})(["width:20px;height:20px;"]);let R=function(e){var i=e.width,t=e.height,n=e.sprites,r=e.updateWidth,s=e.updateHeight,o=e.updateSprites,c=(0,d.useState)((0,p.get)(n,"file","images/spritesheet.png")),l=c[0],a=c[1],u=(0,d.useState)((0,p.get)(n,"selectedSprites",[])),h=u[0],R=u[1],T=(0,d.useRef)(),V=(0,d.useRef)(),q=(0,d.useRef)(null),X=(0,d.useCallback)(function(e){e.target.files&&e.target.files[0]&&a(URL.createObjectURL(e.target.files[0]))},[a]),B=(0,d.useCallback)(function(){q.current.click()},[]),L=(0,d.useCallback)(function(e){return r(parseInt((0,p.get)(e,"target.value",i)))},[i,r]),Y=(0,d.useCallback)(function(e){return s(parseInt((0,p.get)(e,"target.value",t)))},[t,s]),U=(0,d.useCallback)(function(e,i,t){return e((0,p.isEqual)(t,"+")?i+1:i-1)},[]),W=(0,d.useCallback)(function(e){if(V.current){var n=T.current.getBoundingClientRect(),r=T.current.width/n.width,s=T.current.height/n.height,o=(e.clientX-n.left)*r,c=(e.clientY-n.top)*s,l=Math.floor(o/i),a=Math.floor(c/t),d={spriteX:l,spriteY:a},u=(0,p.some)(h,function(e){return(0,p.isEqual)(e.spriteX,l)&&(0,p.isEqual)(e.spriteY,a)});R(function(e){return u?(0,p.filter)(e,function(e){return!(0,p.isEqual)(e.spriteX,l)||!(0,p.isEqual)(e.spriteY,a)}):[].concat((0,g.A)(e),[d])})}},[i,t,h,R]),Q=(0,d.useCallback)(function(){if(V.current&&!(0,p.isEmpty)(h)){var e=V.current;e.lineWidth=2,e.strokeStyle="blue";for(var n=0;n<h.length;n++){var r=h[n],s=r.spriteX,o=r.spriteY;e.strokeRect(s*i,o*t,i,t)}}},[i,t,h]);return(0,d.useEffect)(function(){if(T.current&&l){var e=T.current,n=e.getContext("2d");V.current=n;var r=new Image;r.src=l,r.onload=function(){e.width=r.width,e.height=r.height,n.drawImage(r,0,0,r.width,r.height),n.strokeStyle="red";for(var s=0;s<r.width;s+=i)for(var o=0;o<r.height;o+=t)n.strokeRect(s,o,i,t);Q()}}},[l,i,t,Q]),(0,d.useEffect)(function(){o({file:l,width:i,height:t,selectedSprites:h})},[o,h,i,t,l]),(0,m.jsxs)(y,{children:[(0,m.jsxs)(b,{children:[(0,m.jsxs)(w,{onClick:B,children:[(0,m.jsx)(C,{ref:q,type:"file",style:{display:"none"},onChange:X}),(0,m.jsxs)(_,{children:[(0,m.jsx)("span",{children:"Choisir une spritesheet"}),(0,m.jsx)(z,{icon:f.QLR})]})]}),!(0,p.isUndefined)(l)&&(0,m.jsxs)(v,{children:[(0,m.jsxs)(N,{children:[(0,m.jsxs)(j,{children:[(0,m.jsxs)(A,{children:["x : ",i]}),(0,m.jsx)(I,{type:"range",min:"1",max:"200",value:i,onChange:L}),(0,m.jsx)(k,{width:20,height:20,onClick:function(){return U(r,i,"+")},children:(0,m.jsx)(x.g,{icon:f.QLR})}),(0,m.jsx)(k,{width:20,height:20,onClick:function(){return U(r,i,"-")},children:(0,m.jsx)(x.g,{icon:f.EZy})})]}),(0,m.jsxs)(j,{children:[(0,m.jsxs)(A,{children:["y : ",t]}),(0,m.jsx)(I,{type:"range",min:"1",max:"200",value:t,onChange:Y}),(0,m.jsx)(k,{width:20,height:20,onClick:function(){return U(s,t,"+")},children:(0,m.jsx)(x.g,{icon:f.QLR})}),(0,m.jsx)(k,{width:20,height:20,onClick:function(){return U(s,t,"-")},children:(0,m.jsx)(x.g,{icon:f.EZy})})]})]}),(0,m.jsxs)("span",{children:["Sprites s\xe9lectionn\xe9s: ",(0,p.size)(h)]})]})]}),(0,m.jsx)(E,{children:(0,m.jsx)(S,{ref:T,onClick:W})})]})};var T=t(8203),V=t(5794),q=t(3040),X=t(3845),B=t(5185),L=t(4046),Y=a.Ay.div.withConfig({displayName:"SpriteVisualizer__Container",componentId:"sc-1lpubyy-0"})(["display:flex;flex-direction:column;gap:16px;margin-top:24px;"]),U=a.Ay.div.withConfig({displayName:"SpriteVisualizer__Tiles",componentId:"sc-1lpubyy-1"})(["display:flex;gap:4px;flex-wrap:wrap;"]),W=a.Ay.div.withConfig({displayName:"SpriteVisualizer__Button",componentId:"sc-1lpubyy-2"})(["width:fit-content;border:1px solid white;border-radius:5px;padding:4px;cursor:pointer;"]),Q=a.Ay.div.withConfig({displayName:"SpriteVisualizer__Visualizer",componentId:"sc-1lpubyy-3"})(["display:flex;flex-direction:column;gap:8px;"]),F=a.Ay.div.withConfig({displayName:"SpriteVisualizer__Settings",componentId:"sc-1lpubyy-4"})(["display:flex;"]),H=a.Ay.div.withConfig({displayName:"SpriteVisualizer__Inline",componentId:"sc-1lpubyy-5"})(["display:flex;gap:8px;align-items:center;"]),P=a.Ay.div.withConfig({displayName:"SpriteVisualizer__Count",componentId:"sc-1lpubyy-6"})(["min-width:50px;"]),O=a.Ay.input.withConfig({displayName:"SpriteVisualizer__Slider",componentId:"sc-1lpubyy-7"})(["min-width:200px;width:200px;"]),Z=a.Ay.div.withConfig({displayName:"SpriteVisualizer__SettingsButton",componentId:"sc-1lpubyy-8"})(["padding:2px;width:","px;height:","px;border:1px solid white;border-radius:20px;cursor:pointer;"],function(e){return e.width},function(e){return e.height}),M=a.Ay.div.withConfig({displayName:"SpriteVisualizer__CanvasWrapper",componentId:"sc-1lpubyy-9"})(["overflow:auto;"]),D=a.Ay.canvas.withConfig({displayName:"SpriteVisualizer__Test",componentId:"sc-1lpubyy-10"})(["width:200px;",""],u.A.lessThan("m")(o||(o=(0,l.A)(["\n    width: 100%;\n  "])))),G=function(e){var i=e.sprite,t=e.index,n=e.moveTile,r=e.width,s=e.height,o=e.file,c=(0,d.useRef)(null),l=(0,X.H)({accept:"TILE",hover:function(e){e.index!==t&&(n(e.index,t),e.index=t)}}),a=(0,V.A)(l,2)[1],p=(0,B.i)({type:"TILE",item:{index:t}});return(0,(0,V.A)(p,2)[1])(a(c)),(0,d.useEffect)(function(){var e=c.current;if(e){var t=e.getContext("2d");t.clearRect(0,0,r,s);var n=new Image;n.onload=function(){t.drawImage(n,i.spriteX*r,i.spriteY*s,r,s,0,0,r,s)},n.src=o}},[i,o,r,s]),(0,m.jsx)("canvas",{ref:c,width:r,height:s})};let J=function(e){var i=e.sprites,t=(0,d.useState)(150),n=t[0],r=t[1],s=(0,d.useState)(!1),o=s[0],c=s[1],l=(0,d.useState)(0),a=l[0],u=l[1],h=(0,d.useState)((0,p.get)(i,"selectedSprites",[])),y=h[0],w=h[1],_=(0,p.get)(i,"file"),C=(0,p.get)(i,"width"),S=(0,p.get)(i,"height"),b=(0,d.useCallback)(function(e){return r(parseInt((0,p.get)(e,"target.value",n)))},[n,r]),v=(0,d.useCallback)(function(e,i,t){return e((0,p.isEqual)(t,"+")?i+1:i-1)},[]),j=(0,d.useCallback)(function(e,i){var t=(0,g.A)(y),n=t.splice(e,1),r=(0,V.A)(n,1)[0];t.splice(i,0,r),w(t)},[y,w]);return((0,d.useEffect)(function(){var e;return o&&y.length>0&&(e=setInterval(function(){u(function(e){return(e+1)%y.length})},n)),function(){e&&clearInterval(e)}},[n,o,y]),(0,d.useEffect)(function(){w((0,p.get)(i,"selectedSprites",[]))},[i]),(0,p.isUndefined)(_))?(0,m.jsx)(Y,{children:(0,m.jsx)("span",{children:'Veuillez charger une spritesheet dans l\'onglet "S\xe9lection"'})}):(0,p.isEmpty)(y)?(0,m.jsx)(Y,{children:(0,m.jsx)("span",{children:'Veuillez s\xe9lectionner des sprites dans l\'onglet "S\xe9lection"'})}):(0,m.jsx)(L.Q,{backend:q.t2,children:(0,m.jsxs)(Y,{children:[(0,m.jsx)(U,{children:(0,p.map)(y,function(e,i){return(0,m.jsx)(G,{sprite:e,index:i,moveTile:j,width:C,height:S,file:_},i)})}),(0,m.jsx)(W,{onClick:function(){c(!o)},children:o?"Pause":"Play"}),(0,m.jsxs)(Q,{children:[(0,m.jsx)(F,{children:(0,m.jsxs)(H,{children:[(0,m.jsxs)(P,{children:[n," ms/image"]}),(0,m.jsx)(O,{type:"range",min:"50",max:"300",value:n,onChange:b}),(0,m.jsx)(Z,{width:20,height:20,onClick:function(){return v(r,n,"+")},children:(0,m.jsx)(x.g,{icon:f.QLR})}),(0,m.jsx)(Z,{width:20,height:20,onClick:function(){return v(r,n,"-")},children:(0,m.jsx)(x.g,{icon:f.EZy})})]})}),(0,m.jsx)(M,{children:(0,m.jsx)(D,{width:C,height:S,ref:function(e){if(null!=e){var i=e.getContext("2d"),t=new Image;t.onload=function(){i.drawImage(t,y[a].spriteX*C,y[a].spriteY*S,C,S,0,0,C,S)},t.src=_}}})})]})]})})};var K=a.Ay.div.withConfig({displayName:"sprite-slicer__Container",componentId:"sc-93elk2-0"})(["display:flex;width:100%;height:100%;background:grey;padding:24px;flex-direction:column;",""],u.A.lessThan("m")(c||(c=(0,l.A)(["\n  "])))),$=a.Ay.div.withConfig({displayName:"sprite-slicer__Tabs",componentId:"sc-93elk2-1"})(["display:flex;gap:16px;cursor:pointer;margin-top:24px;width:100%;border:1px solid white;border-top:none;border-left:none;border-right:none;"]),ee=a.Ay.div.withConfig({displayName:"sprite-slicer__Tab",componentId:"sc-93elk2-2"})(["border:"," solid white;border-bottom:none;border-top-left-radius:10px 10px;padding:8px;font-weight:",";"],function(e){return e.selected?"2px":"1px"},function(e){return e.selected?"600":"400"}),ei=["s\xe9lection","animation"];let et=function(){var e=(0,d.useState)(80),i=e[0],t=e[1],n=(0,d.useState)(80),r=n[0],s=n[1],o=(0,d.useState)({}),c=o[0],l=o[1],a=(0,d.useState)(ei[0]),u=a[0],g=a[1],f=(0,d.useCallback)(function(e){return g(e)},[g]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(T.A,{}),(0,m.jsxs)(K,{children:[(0,m.jsx)(h.A,{}),(0,m.jsx)($,{children:(0,p.map)(ei,function(e){return(0,m.jsx)(ee,{selected:(0,p.isEqual)(e,u),onClick:function(){return f(e)},children:(0,p.capitalize)(e)})})}),(0,p.isEqual)(u,"s\xe9lection")&&(0,m.jsx)(R,{width:i,height:r,sprites:c,updateWidth:t,updateHeight:s,updateSprites:l}),(0,p.isEqual)(u,"animation")&&(0,m.jsx)(J,{sprites:c})]})]})}},2444:(e,i,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/sprite-slicer",function(){return t(1998)}])},7821:(e,i,t)=>{"use strict";t.d(i,{A:()=>d});var n=t(8230),r=t.n(n),s=t(1626),o=t(1041),c=t(1772),l=t(7876),a=(0,s.Ay)(c.g).withConfig({displayName:"HomeButton",componentId:"sc-1snf18r-0"})(["position:absolute;top:0;width:24px;height:24px;top:8px;left:12px;padding:4px;cursor:pointer;"]);let d=function(){return(0,l.jsx)(r(),{href:"/",children:(0,l.jsx)(a,{icon:o.muz,color:"white"})})}},8203:(e,i,t)=>{"use strict";t.d(i,{A:()=>n});let n=(0,t(1626).DU)(["*,*::before,*::after{box-sizing:border-box;}#__next{height:100%;width:100%;}html{height:100%;margin:0;}body{margin:0;height:100%;color:white;font-family:'Roboto',sans-serif;background-image:black;*::-webkit-scrollbar{width:4px;}*::-webkit-scrollbar-thumb{background:white;transition:.5s;}}a{text-decoration:none;color:inherit;&:hover{text-decoration:none;}}img{max-width:100%;}pre{background:grey;padding:2px 4px;border-radius:10px;}code{background:grey;padding:0px 4px;border-radius:10px;white-space:pre-wrap;}"])}},e=>{e.O(0,[888,725,639,772,766,636,593,792],()=>e(e.s=2444)),_N_E=e.O()}]);